<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>菜鸟教程(runoob.com)</title>
</head>
<head>
<script>
//!!!未调通，读cookie未生效
function setCookie(cname,cvalue,exdays){
	var d = new Date();
	d.setTime(d.getTime()+(exdays*24*60*60*1000));
	
    document.cookie = encodeURIComponent(cname) + '=' + encodeURIComponent(cvalue) + ';';
    k1 = document.cookie;
    //k1 = encodeURIComponent(cname) + '=' + encodeURIComponent(cvalue) + ';';
    document.getElementById('demo2').innerHTML = "username: " + k1;
    //document.cookie = "expires=" + d.toGMTString() + ';';
    //document.getElementById('demo3').innerHTML = "expires: " + document.cookie;
}
function getCookie(cname){
	var name = cname + "=";
	var ca = document.cookie.split(';');
	for(var i=0; i<ca.length; i++) {
		var c = ca[i].trim();
		if (c.indexOf(name)==0) { return c.substring(name.length,c.length); }
	}
	return "";
}
function checkCookie(){
	var user=getCookie("username");
	if (user!=""){
		alert("欢迎 " + user + " 再次访问");
	}
	else {
		user = prompt("请输入你的名字:","");
        //document.write("user = " + user + "</br>");
        document.getElementById('demo1').innerHTML = user;
  		if (user!="" && user!=null){
    		setCookie("username",user,30000);
    	}
	}
}
</script>
</head>
	
<body>
<button onclick="checkCookie()">Set Cookie</button>
<p id='demo1'>demo1</p>
<p id='demo2'>demo2</p>
<p id='demo3'>demo3</p>
</body>
	
</html>